{% extends "base.html" %}
{% load static %}

{% block title %}Editar Datos{% endblock %}

{% block content %}
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
<div class="container mt-4">
    <h1 class="mb-4">Editar Datos</h1>
    
    <form method="POST" action="{% url 'editar_datos' usuario.cedula %}">
        {% csrf_token %}
        
        <ul class="nav nav-tabs mb-4" id="myTab" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" id="info-basica-tab" data-toggle="tab" href="#info-basica" role="tab">Información Básica</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="contrato-tab" data-toggle="tab" href="#contrato" role="tab">Datos de Contrato</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="financiero-tab" data-toggle="tab" href="#financiero" role="tab">Aspectos Financieros</a>
            </li>
        </ul>
        
        <div class="tab-content" id="myTabContent">
            <!-- Pestaña 1: Información Básica -->
            <div class="tab-pane fade show active" id="info-basica" role="tabpanel">
                <div class="row px-4">
                    <div class="col-md-8">
                        <div class="form-group">
                            <label for="nombre">Nombre:</label>
                            <input type="text" id="nombre" name="nombre" class="form-control" value="{{ usuario.nombre }}" required>
                        </div>
                        <div class="form-group">
                            <label for="CPS">CPS:</label>
                            <input type="text" id="CPS" name="CPS" class="form-control" value="{{ usuario.CPS }}" required>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="sitio_expedicion">Sitio de Expedición:</label>
                            <input type="text" id="sitio_expedicion" name="sitio_expedicion" class="form-control" value="{{ usuario.sitio_expedicion }}" required>
                        </div>
                        <div class="form-group">
                            <label for="radicado">Radicado:</label>
                            <input type="text" id="radicado" name="radicado" class="form-control" value="{{ usuario.radicado }}" required>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Pestaña 2: Datos de Contrato -->
            <div class="tab-pane fade" id="contrato" role="tabpanel">
                <div class="form-group">
                    <label for="objeto">Objeto:</label>
                    <input type="text" id="objeto" name="objeto" class="form-control" value="{{ usuario.objeto }}" required>
                </div>
                <div class="form-group">
                    <label for="obligaciones">Obligaciones:</label>
                    <textarea id="obligaciones" name="obligaciones" class="form-control" rows="5" required>{{ usuario.obligaciones }}</textarea>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="fecha_suscripcion">Fecha de Suscripción:</label>
                            <input type="date" id="fecha_suscripcion" name="fecha_suscripcion" class="form-control" value="{{ usuario.fecha_suscripcion }}" required>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="fecha_inicio">Fecha de Inicio:</label>
                            <input type="date" id="fecha_inicio" name="fecha_inicio" class="form-control" value="{{ usuario.fecha_inicio }}" required>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="fecha_terminacion">Fecha de Terminación:</label>
                            <input type="date" id="fecha_terminacion" name="fecha_terminacion" class="form-control" value="{{ usuario.fecha_terminacion }}" required>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Pestaña 3: Aspectos Financieros -->
            <div class="tab-pane fade" id="financiero" role="tabpanel">
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="vr_inicial_contrato">Valor Inicial del Contrato:</label>
                            <input type="number" id="vr_inicial_contrato" name="vr_inicial_contrato" class="form-control" value="{{ usuario.vr_inicial_contrato }}" required>
                        </div>
                        <div class="form-group">
                            <label for="valor_mensual_honorarios">Valor Mensual de Honorarios:</label>
                            <input type="number" id="valor_mensual_honorarios" name="valor_mensual_honorarios" class="form-control" value="{{ usuario.valor_mensual_honorarios }}" required>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="tiempo_ejecucion_dia">Tiempo de Ejecución (días):</label>
                            <input type="number" id="tiempo_ejecucion_dia" name="tiempo_ejecucion_dia" class="form-control" value="{{ usuario.tiempo_ejecucion_dia }}" required>
                        </div>
                        <div class="form-group">
                            <label for="año_contrato">Año del Contrato:</label>
                            <input type="number" id="año_contrato" name="año_contrato" class="form-control" value="{{ usuario.año_contrato }}" min="2021" required>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="mt-4 text-right">
            <button type="submit" class="btn btn-primary btn-lg">
                <i class="fas fa-save"></i> Actualizar Datos
            </button>
            <a href="#" class="btn btn-secondary btn-lg ml-2">Cancelar</a>
        </div>
    </form>
</div>

<!-- Scripts necesarios para las pestañas -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
{% endblock %}